<!DOCTYPE html>
<html>
<head>
    <title>OAuth Redirect</title>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Parse the URL parameters
            const urlParams = new URLSearchParams(window.location.search);
            const code = urlParams.get('code');
            if (code) {
                // Send the authorization code to the Chrome extension
                window.location.href = 'chrome-extension://olmliaphmhdaecjdppiagmcmkodjibpo' + '?authorizationCode=' + code;
                // chrome.runtime.sendMessage('olmliaphmhdaecjdppiagmcmkodjibpo', {authorizationCode: code}, function (response) {
                //     console.log(response);
                //     // expand to body do not override body content
                //     document.body.innerHTML = 'Code: ' + code + '<br>Response: ' + JSON.stringify(response);
                //     if (response.result === 'success') {
                //         // Redirect to the extension's dashboard
                //         console.log("redirecting")
                //         window.location.href = 'chrome-extension://olmliaphmhdaecjdppiagmcmkodjibpo';
                //     }
                // });
            }
        });
    </script>
</head>
<body>
</body>
</html>